<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app/components/exp-frame-select/component.js - ember-lookit-frameplayer</title>
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="https://yui-s.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="https://yui-s.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">
<div id="doc">
    <div id="bd" class="yui3-g">
        <div class="yui3-u-1-5">
            <div id="docs-sidebar" class="sidebar apidocs">
              <h2 style="display:inline;">
              <div>
                <img style="float:right; vertical-align:middle;" src="../assets/css/logo.png" height="70">
                <span>Lookit<br> component<br> docs</span>
              </div>

              </h2>


              <div id="api-list">
                  <div id="api-tabview">
              
                    <div id="api-tabview-panel">
                        <h2 class="off-left">Collections</h2>
                        <ul id="api-modules" class="apis modules">
                            <li class="module-sidebar-components"><a href="../modules/components.html">components</a></li>
                            <li class="module-sidebar-exp-player"><a href="../modules/exp-player.html">exp-player</a></li>
                            <li class="module-sidebar-frames"><a href="../modules/frames.html">frames</a></li>
                            <li class="module-sidebar-mixins"><a href="../modules/mixins.html">mixins</a></li>
                            <li class="module-sidebar-randomizers"><a href="../modules/randomizers.html">randomizers</a></li>
                            <li class="module-sidebar-services"><a href="../modules/services.html">services</a></li>
                        </ul>
                        <h2 class="off-left">All elements</h2>
                              <div id="api-tabview-filter">
                      <input type="search" id="api-filter" placeholder="Type to filter">
                    </div>
                        <ul id="api-classes" class="apis classes">
                            <li><a href="../classes/Exp-exit-survey.html">Exp-exit-survey</a></li>
                            <li><a href="../classes/Exp-frame-base.html">Exp-frame-base</a></li>
                            <li><a href="../classes/Exp-frame-select.html">Exp-frame-select</a></li>
                            <li><a href="../classes/Exp-lookit-dialogue-page.html">Exp-lookit-dialogue-page</a></li>
                            <li><a href="../classes/Exp-lookit-exit-survey.html">Exp-lookit-exit-survey</a></li>
                            <li><a href="../classes/Exp-lookit-geometry-alternation.html">Exp-lookit-geometry-alternation</a></li>
                            <li><a href="../classes/Exp-lookit-geometry-alternation-open.html">Exp-lookit-geometry-alternation-open</a></li>
                            <li><a href="../classes/Exp-lookit-instructions.html">Exp-lookit-instructions</a></li>
                            <li><a href="../classes/Exp-lookit-mood-questionnaire.html">Exp-lookit-mood-questionnaire</a></li>
                            <li><a href="../classes/Exp-lookit-observation.html">Exp-lookit-observation</a></li>
                            <li><a href="../classes/Exp-lookit-preferential-looking.html">Exp-lookit-preferential-looking</a></li>
                            <li><a href="../classes/Exp-lookit-preview-explanation.html">Exp-lookit-preview-explanation</a></li>
                            <li><a href="../classes/Exp-lookit-story-page.html">Exp-lookit-story-page</a></li>
                            <li><a href="../classes/Exp-lookit-survey.html">Exp-lookit-survey</a></li>
                            <li><a href="../classes/Exp-lookit-text.html">Exp-lookit-text</a></li>
                            <li><a href="../classes/Exp-lookit-video.html">Exp-lookit-video</a></li>
                            <li><a href="../classes/Exp-lookit-video-assent.html">Exp-lookit-video-assent</a></li>
                            <li><a href="../classes/Exp-lookit-video-consent.html">Exp-lookit-video-consent</a></li>
                            <li><a href="../classes/Exp-player.html">Exp-player</a></li>
                            <li><a href="../classes/Exp-video-config.html">Exp-video-config</a></li>
                            <li><a href="../classes/Exp-video-config-quality.html">Exp-video-config-quality</a></li>
                            <li><a href="../classes/Exp-video-consent.html">Exp-video-consent</a></li>
                            <li><a href="../classes/Exp-video-preview.html">Exp-video-preview</a></li>
                            <li><a href="../classes/Expand-assets.html">Expand-assets</a></li>
                            <li><a href="../classes/Full-screen.html">Full-screen</a></li>
                            <li><a href="../classes/Media-reload.html">Media-reload</a></li>
                            <li><a href="../classes/Permute.html">Permute</a></li>
                            <li><a href="../classes/Random-parameter-set.html">Random-parameter-set</a></li>
                            <li><a href="../classes/Select.html">Select</a></li>
                            <li><a href="../classes/Session-record.html">Session-record</a></li>
                            <li><a href="../classes/Video-record.html">Video-record</a></li>
                            <li><a href="../classes/video-recorder.html">video-recorder</a></li>
                        </ul>
                    </div>
              
                  </div>
              </div>
            </div>
        </div>
        <div class="yui3-u-4-5">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: app/components/exp-frame-select/component.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import ExpFrameBaseComponent from &#x27;../exp-frame-base/component&#x27;;
import ExperimentParser from &#x27;../../utils/parse-experiment&#x27;;

/**
 * @module exp-player
 * @submodule frames
 */

/**
 *
 * Frame that allows you to specify a list of possible frames to show, plus an index or
 * list of indices of which ones to actually show. The frame(s) will be inserted into the
 * sequence of frames for this study on the fly, so that you can use a custom
 * &lt;a href=&quot;../classes/Exp-frame-base.html#property_generateProperties&quot; class=&quot;crosslink&quot;&gt;generateProperties&lt;/a&gt;
 * function to select which frame(s) to show.
 *
 *
 * This frame serves as a wrapper for the randomizer &lt;a href=&quot;../classes/Select.html&quot; class=&quot;crosslink&quot;&gt;select&lt;/a&gt;,
 * which is evaluated during experiment parsing and cannot be modified on the fly.
 *
 *
 * For more information about making study behavior conditional on data collected,
 * see &lt;a href=&quot;https://lookit.readthedocs.io/en/develop/researchers-create-experiment.html#conditional-logic&quot;&gt;the Lookit docs&lt;/a&gt;.
 *
 *
 * Example usage:
 &#x60;&#x60;&#x60;json
        &quot;study-procedure&quot;: {
            &quot;kind&quot;: &quot;exp-frame-select&quot;,
            &quot;frameOptions&quot;: [
                {
                    &quot;kind&quot;: &quot;exp-lookit-text&quot;,
                    &quot;blocks&quot;: [
                        {
                            &quot;emph&quot;: true,
                            &quot;text&quot;: &quot;Cats are great&quot;
                        },
                        {
                            &quot;text&quot;: &quot;We are measuring how much your child loves cats now. Beep boop!&quot;
                        }
                    ]
                },
                {
                    &quot;kind&quot;: &quot;exp-lookit-text&quot;,
                    &quot;blocks&quot;: [{
                            &quot;emph&quot;: true,
                            &quot;text&quot;: &quot;Your child is not eligible for this study&quot;
                        },
                        {
                            &quot;text&quot;: &quot;Either you do not have any cats or your child does not love cats.&quot;
                        }
                    ]
                }
            ],
            &quot;generateProperties&quot;: &quot;function(expData, sequence, child, pastSessions) {var formData = expData[&#x27;0-eligibility-survey&#x27;].formData; if (formData.nCats &gt;= 1 &amp;&amp; formData.loveCats == &#x27;yes&#x27;) { console.log(&#x27;eligible&#x27;); return { &#x27;whichFrames&#x27;: 0, &#x27;ELIGIBLE&#x27;: true } } else { console.log(&#x27;ineligible&#x27;); return { &#x27;whichFrames&#x27;: 1,  &#x27;ELIGIBLE&#x27;: false } } }&quot;
        }

 * &#x60;&#x60;&#x60;
 *
 *
 * **Warning:** to avoid unpredictable behavior, this frame does not itself use any
 * &lt;a href=&quot;../classes/Exp-frame-base.html#property_selectNextFrame&quot; class=&quot;crosslink&quot;&gt;selectNextFrame&lt;/a&gt; passed to it.
 * (Frames within the &#x60;frameOptions&#x60; list are welcome to make use of &#x60;selectNextFrame&#x60;, though!)
 *
 *
 * Data will be stored for this frame so that any &#x60;&#x60;generatedProperties&#x60;&#x60; are available
 * for future use; however, it will proceed immediately upon loading to the first frame
 * that is specified (or the next frame in the original sequence, if it turns out that &#x60;whichFrames&#x60; is an empty
 * list).
 *
 *
 * In &#x60;expData&#x60;, the frame keys for all frames generated by this frame will be prefixed
 * by this frame&#x27;s ID, with an index within &#x60;whichFrames&#x60; appended to the end of the ID.
 * For instance, if this frame&#x27;s ID is &#x60;1-study-procedure&#x60;, and it generates three frames,
 * we would have keys &#x60;1-study-procedure&#x60;, &#x60;1-study-procedure-0&#x60;, &#x60;1-study-procedure-1&#x60;, and
 * &#x60;1-study-procedure-2&#x60;.
 *
 *
 * @class Exp-frame-select
 * @extends Exp-frame-base
 *
 */
export default ExpFrameBaseComponent.extend({
    type: &#x27;exp-frame-select&#x27;,

    whichFrames: -1,

    meta: {
        name: &#x27;ExpFrameSelect&#x27;,
        description: &#x27;Wrapper for select randomizer&#x27;,
        parameters: {
            type: &#x27;object&#x27;,
            properties: {
                /**
                 * List of frames that can be created by this randomizer. Each frame is an
                 * object with any necessary frame-specific properties specified. The
                 * &#x27;kind&#x27; of frame can be specified either here (per frame) or in
                 * commonFrameProperties. If a property is defined for a given frame both
                 * in this frame list and in commonFrameProperties, the value in the frame
                 * list will take precedence.
                 *
                 * (E.g., you could include &#x27;kind&#x27;: &#x27;normal-frame&#x27; in
                 * commmonFrameProperties, but for a single frame in frameOptions, include
                 * &#x27;kind&#x27;: &#x27;special-frame&#x27;.)
                 *
                 * @property {Object[]} frameOptions
                 */
                frameOptions: {
                    type: &#x27;array&#x27;,
                    items: {
                        type: &#x27;object&#x27;
                    },
                    default: []
                },

                /**
                 * Object describing common parameters to use in EVERY frame created
                 * by this randomizer. Parameter names and values are as described in
                 * the documentation for the frameType used.
                 *
                 * @property {Object} commonFrameProperties
                 */

                commonFrameProperties: {
                    type: &#x27;object&#x27;,
                    default: {}
                },

                /**
                 * Index or indices (0-indexed) within frameOptions to actually use. This can be either a number
                 * (e.g., 0 or 1 to use the first or second option respectively) or an array providing
                 * an ordered list of indices to use (e.g., [0, 1] or [1, 0] to use the first then
                 * second or second then first options, respectively). All indices must be integers
                 * in [0, frameOptions.length).
                 *
                 * If not provided or -1, the entire frameOptions list is used in order. (If empty
                 * list is provided, however, that is respected and no frames are inserted by this
                 * randomizer.)
                 *
                 * @property {Number} whichFrames
                 */
                whichFrames: {
                    type: &#x27;number&#x27;,
                    default: -1
                }
            }
        },
        data: {
            type: &#x27;object&#x27;,
            properties: {

            }
        }
    },

    didReceiveAttrs() {
        this._super(...arguments);

        // Convert current frame (w/ possibly updated parameters based on generateProperties)
        // to a single &#x27;select&#x27; randomizer frame.

        var equivalentRandomizer = {
            &#x27;kind&#x27;: &#x27;choice&#x27;,
            &#x27;sampler&#x27;: &#x27;select&#x27;,
            &#x27;whichFrames&#x27;: this.get(&#x27;whichFrames&#x27;) == -1 ? [...this.get(&#x27;frameOptions&#x27;).keys()] : this.get(&#x27;whichFrames&#x27;),
            &#x27;frameOptions&#x27;: this.get(&#x27;frameOptions&#x27;),
            &#x27;commonFrameProperties&#x27;: this.get(&#x27;commonFrameProperties&#x27;)
        };
        this.set(&#x27;whichFrames&#x27;, -1);

        var id = this.get(&#x27;id&#x27;);
        var parser = new ExperimentParser({
            structure: {
                &#x27;frames&#x27;: {
                    [id]: equivalentRandomizer
                },
                &#x27;sequence&#x27;: [
                    id
                ]
            },
            pastSessions: this.parentView.get(&#x27;pastSessions&#x27;).toArray()
        });
        const prependFrameInds = false;
        var [frameConfigs, conditions] = parser.parse(prependFrameInds);

        var frames = this.parentView.get(&#x27;frames&#x27;);
        frames.splice(this.get(&#x27;frameIndex&#x27;) + 1, 0, ...frameConfigs);

        this.parentView.set(&#x27;frames&#x27;, frames);

        var existingConditions = this.parentView.get(&#x27;conditions&#x27;);
        Object.assign(existingConditions, conditions);
        this.parentView.set(&#x27;conditions&#x27;, existingConditions);
    },

    didRender() {
        this._super(...arguments);
        this.send(&#x27;next&#x27;);
    }

});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
